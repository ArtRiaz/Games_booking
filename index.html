<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Booking Games</title>
    <style>
        @import url("https://fonts.googleapis.com/css?family=Cantarell:i|Droid+Serif:b");
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            color: var(--tg-theme-text-color);
            background: var(--tg-theme-bg-color);

        }

        #main {
            width: 100%;
            padding: 20px;
            text-align: center;
        }

        h1 {
            margin-top: 50px;
            margin-bottom: 10px;
        }

        img {
            width: 70px;
            margin: 0 auto;
        }

        button {
            border: 0;
            border-radius: 5px;
            margin-top: 50px;
            height: 40px;
            width: 100px;
            font-size: 10px;
            font-weight: 400;
            cursor: pointer;
            transition: all 500ms ease;
            color: var(--tg-theme-button-color);
            background: var(--tg-theme-button-text-color);
        }

        body {
            font-family:Cantarell ;
            font-weight: 200;

        }

        #form {
            display: none;
            text-align: center;
        }

        input {
            width: 90%;
            outline: none;
            margin: 10px 5%;
            padding: 15px 10px;
            font-size: 14px;
            border: 2px solid silver;
            border-radius: 5px;
        }
        input:focus {
            border-color: #db5d5d;
        }
    </style>
</head>
<body>
    <div id="main">
        <h1>Cashflow games</h1>
        <img src="./cf.jpeg" alt="Cashflow">
        <p>"Welcome to the world of Cashflow, where you can embark on your journey to financial independence! This game will teach you how to manage finances, invest, and pave the way to freedom from financial worries. Are you ready to leave the 'Rat Race' behind and start building your path to 'Financial Freedom'? Let's begin and discover which financial decisions will lead you to success!"</p>
        <button id="enter">Enter</button>
        <button id="register">Registr</button>
    </div>
    <div>
        <form id="form">
            <input type="text" placeholder="Nickname" id="user_name">
            <input type="password" placeholder="Password" id="pass">
            <div id="error"></div>
            <button id="sign">Sign in</button>
        </form>
    </div>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        let tg = window.Telegram.WebApp;
        let register = document.getElementById('register');
        let sign = document.getElementById('sign_in');
        tg.expand();
        register.addEventListener("click", () => {
            document.getElementById('main').style.display = 'none';
            document.getElementById('form').style.display = 'block';
            document.getElementById('user_name').value = tg.initDataUnsafe.user.first_name + " " + tg.initDataUnsafe.user.last_name;
        });

        sign.addEventListener('click', () => {
            document.getElementById('error').innerText = "";
            let name = document.getElementById('user_name').value;
            let password = document.getElementById('pass').value;
            if (password.length > 5) {
                document.getElementById('error').innerText = "Password must be at least 5 characters";
                return ;
            }
            data = {
                name: name,
                password: password

            }
            tg.sendData(JSON.stringify(data));


            tg.close();
        });
    </script>
</body>
</html>
